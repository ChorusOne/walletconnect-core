(function(P,Je){typeof exports=="object"&&typeof module<"u"?Je(exports,require("@walletconnect/types"),require("@walletconnect/utils")):typeof define=="function"&&define.amd?define(["exports","@walletconnect/types","@walletconnect/utils"],Je):(P=typeof globalThis<"u"?globalThis:P||self,Je(P["@walletconnect/core"]={},P.types$3,P.utils$3))})(this,function(P,Je,D){"use strict";var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dt(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var nt={exports:{}},At=typeof Reflect=="object"?Reflect:null,Sn=At&&typeof At.apply=="function"?At.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},sr;At&&typeof At.ownKeys=="function"?sr=At.ownKeys:Object.getOwnPropertySymbols?sr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:sr=function(e){return Object.getOwnPropertyNames(e)};function go(t){console&&console.warn&&console.warn(t)}var On=Number.isNaN||function(e){return e!==e};function J(){J.init.call(this)}nt.exports=J,nt.exports.once=bo,J.EventEmitter=J,J.prototype._events=void 0,J.prototype._eventsCount=0,J.prototype._maxListeners=void 0;var Tn=10;function or(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(J,"defaultMaxListeners",{enumerable:!0,get:function(){return Tn},set:function(t){if(typeof t!="number"||t<0||On(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Tn=t}}),J.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},J.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||On(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function In(t){return t._maxListeners===void 0?J.defaultMaxListeners:t._maxListeners}J.prototype.getMaxListeners=function(){return In(this)},J.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")Sn(l,this,r);else for(var u=l.length,g=An(l,u),n=0;n<u;++n)Sn(g[n],this,r);return!0};function Rn(t,e,r,n){var i,s,a;if(or(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=In(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,go(c)}return t}J.prototype.addListener=function(e,r){return Rn(this,e,r,!1)},J.prototype.on=J.prototype.addListener,J.prototype.prependListener=function(e,r){return Rn(this,e,r,!0)};function yo(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xn(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=yo.bind(n);return i.listener=r,n.wrapFn=i,i}J.prototype.once=function(e,r){return or(r),this.on(e,xn(this,e,r)),this},J.prototype.prependOnceListener=function(e,r){return or(r),this.prependListener(e,xn(this,e,r)),this},J.prototype.removeListener=function(e,r){var n,i,s,a,c;if(or(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){c=n[a].listener,s=a;break}if(s<0)return this;s===0?n.shift():po(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||r)}return this},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Cn(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?_o(i):An(i,i.length)}J.prototype.listeners=function(e){return Cn(this,e,!0)},J.prototype.rawListeners=function(e){return Cn(this,e,!1)},J.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Pn.call(t,e)},J.prototype.listenerCount=Pn;function Pn(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}J.prototype.eventNames=function(){return this._eventsCount>0?sr(this._events):[]};function An(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function po(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function _o(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function bo(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,s),n(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Ln(t,e,s,{once:!0}),e!=="error"&&vo(t,i,{once:!0})})}function vo(t,e,r){typeof t.on=="function"&&Ln(t,"error",e,r)}function Ln(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ar={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Pr=function(t,e){return Pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Pr(t,e)};function Eo(t,e){Pr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ar=function(){return Ar=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ar.apply(this,arguments)};function mo(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function wo(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Do(t,e){return function(r,n){e(r,n,t)}}function So(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Oo(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(g){try{u(n.next(g))}catch(O){a(O)}}function l(g){try{u(n.throw(g))}catch(O){a(O)}}function u(g){g.done?s(g.value):i(g.value).then(c,l)}u((n=n.apply(t,e||[])).next())})}function To(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(g){return l([u,g])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(g){u=[6,g],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Io(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Ro(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Lr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nn(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function xo(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Nn(arguments[e]));return t}function Co(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)n[i]=s[a];return n}function Bt(t){return this instanceof Bt?(this.v=t,this):new Bt(t)}function Po(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){n[p]&&(i[p]=function(T){return new Promise(function(I,x){s.push([p,T,I,x])>1||c(p,T)})})}function c(p,T){try{l(n[p](T))}catch(I){O(s[0][3],I)}}function l(p){p.value instanceof Bt?Promise.resolve(p.value.v).then(u,g):O(s[0][2],p)}function u(p){c("next",p)}function g(p){c("throw",p)}function O(p,T){p(T),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Ao(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:Bt(t[i](a)),done:i==="return"}:s?s(a):a}:s}}function Lo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Lr=="function"?Lr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(c,l){a=t[s](a),i(c,l,a.done,a.value)})}}function i(s,a,c,l){Promise.resolve(l).then(function(u){s({value:u,done:c})},a)}}function No(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Uo(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function jo(t){return t&&t.__esModule?t:{default:t}}function Mo(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Fo(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Bo=Object.freeze({__proto__:null,__extends:Eo,get __assign(){return Ar},__rest:mo,__decorate:wo,__param:Do,__metadata:So,__awaiter:Oo,__generator:To,__createBinding:Io,__exportStar:Ro,__values:Lr,__read:Nn,__spread:xo,__spreadArrays:Co,__await:Bt,__asyncGenerator:Po,__asyncDelegator:Ao,__asyncValues:Lo,__makeTemplateObject:No,__importStar:Uo,__importDefault:jo,__classPrivateFieldGet:Mo,__classPrivateFieldSet:Fo}),Un=Dt(Bo),zt={};Object.defineProperty(zt,"__esModule",{value:!0});function zo(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}zt.safeJsonParse=zo;function $o(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}zt.safeJsonStringify=$o;var $t={exports:{}},jn;function Ho(){return jn||(jn=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Qe<"u"&&Qe.localStorage?$t.exports=Qe.localStorage:typeof window<"u"&&window.localStorage?$t.exports=window.localStorage:$t.exports=new e}()),$t.exports}var Nr={},Ht={},Mn;function Ko(){if(Mn)return Ht;Mn=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.IKeyValueStorage=void 0;class t{}return Ht.IKeyValueStorage=t,Ht}var Kt={},Fn;function Vo(){if(Fn)return Kt;Fn=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.parseEntry=void 0;const t=zt;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Kt.parseEntry=e,Kt}var Bn;function Go(){return Bn||(Bn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Un;e.__exportStar(Ko(),t),e.__exportStar(Vo(),t)}(Nr)),Nr}Object.defineProperty(ar,"__esModule",{value:!0}),ar.KeyValueStorage=void 0;const Lt=Un,zn=zt,qo=Lt.__importDefault(Ho()),Yo=Go();class $n{constructor(){this.localStorage=qo.default}getKeys(){return Lt.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Lt.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(Yo.parseEntry)})}getItem(e){return Lt.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return zn.safeJsonParse(r)})}setItem(e,r){return Lt.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,zn.safeJsonStringify(r))})}removeItem(e){return Lt.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}ar.KeyValueStorage=$n;var ko=ar.default=$n,Nt={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Ur=function(t,e){return Ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ur(t,e)};function Wo(t,e){Ur(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jr=function(){return jr=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},jr.apply(this,arguments)};function Xo(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Jo(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Qo(t,e){return function(r,n){e(r,n,t)}}function Zo(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ea(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(g){try{u(n.next(g))}catch(O){a(O)}}function l(g){try{u(n.throw(g))}catch(O){a(O)}}function u(g){g.done?s(g.value):i(g.value).then(c,l)}u((n=n.apply(t,e||[])).next())})}function ta(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(g){return l([u,g])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(g){u=[6,g],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function ra(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function na(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Mr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hn(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function ia(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hn(arguments[e]));return t}function sa(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)n[i]=s[a];return n}function Vt(t){return this instanceof Vt?(this.v=t,this):new Vt(t)}function oa(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){n[p]&&(i[p]=function(T){return new Promise(function(I,x){s.push([p,T,I,x])>1||c(p,T)})})}function c(p,T){try{l(n[p](T))}catch(I){O(s[0][3],I)}}function l(p){p.value instanceof Vt?Promise.resolve(p.value.v).then(u,g):O(s[0][2],p)}function u(p){c("next",p)}function g(p){c("throw",p)}function O(p,T){p(T),s.shift(),s.length&&c(s[0][0],s[0][1])}}function aa(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:Vt(t[i](a)),done:i==="return"}:s?s(a):a}:s}}function ca(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Mr=="function"?Mr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(c,l){a=t[s](a),i(c,l,a.done,a.value)})}}function i(s,a,c,l){Promise.resolve(l).then(function(u){s({value:u,done:c})},a)}}function ua(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function fa(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function la(t){return t&&t.__esModule?t:{default:t}}function ha(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function da(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var ga=Object.freeze({__proto__:null,__extends:Wo,get __assign(){return jr},__rest:Xo,__decorate:Jo,__param:Qo,__metadata:Zo,__awaiter:ea,__generator:ta,__createBinding:ra,__exportStar:na,__values:Mr,__read:Hn,__spread:ia,__spreadArrays:sa,__await:Vt,__asyncGenerator:oa,__asyncDelegator:aa,__asyncValues:ca,__makeTemplateObject:ua,__importStar:fa,__importDefault:la,__classPrivateFieldGet:ha,__classPrivateFieldSet:da}),cr=Dt(ga),Gt={},q={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Fr=function(t,e){return Fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Fr(t,e)};function ya(t,e){Fr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Br=function(){return Br=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Br.apply(this,arguments)};function pa(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function _a(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function ba(t,e){return function(r,n){e(r,n,t)}}function va(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ea(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(g){try{u(n.next(g))}catch(O){a(O)}}function l(g){try{u(n.throw(g))}catch(O){a(O)}}function u(g){g.done?s(g.value):i(g.value).then(c,l)}u((n=n.apply(t,e||[])).next())})}function ma(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(g){return l([u,g])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(g){u=[6,g],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function wa(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Da(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function zr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kn(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function Sa(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Kn(arguments[e]));return t}function Oa(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)n[i]=s[a];return n}function qt(t){return this instanceof qt?(this.v=t,this):new qt(t)}function Ta(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){n[p]&&(i[p]=function(T){return new Promise(function(I,x){s.push([p,T,I,x])>1||c(p,T)})})}function c(p,T){try{l(n[p](T))}catch(I){O(s[0][3],I)}}function l(p){p.value instanceof qt?Promise.resolve(p.value.v).then(u,g):O(s[0][2],p)}function u(p){c("next",p)}function g(p){c("throw",p)}function O(p,T){p(T),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Ia(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:qt(t[i](a)),done:i==="return"}:s?s(a):a}:s}}function Ra(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof zr=="function"?zr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(c,l){a=t[s](a),i(c,l,a.done,a.value)})}}function i(s,a,c,l){Promise.resolve(l).then(function(u){s({value:u,done:c})},a)}}function xa(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Ca(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Pa(t){return t&&t.__esModule?t:{default:t}}function Aa(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function La(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Na=Object.freeze({__proto__:null,__extends:ya,get __assign(){return Br},__rest:pa,__decorate:_a,__param:ba,__metadata:va,__awaiter:Ea,__generator:ma,__createBinding:wa,__exportStar:Da,__values:zr,__read:Kn,__spread:Sa,__spreadArrays:Oa,__await:qt,__asyncGenerator:Ta,__asyncDelegator:Ia,__asyncValues:Ra,__makeTemplateObject:xa,__importStar:Ca,__importDefault:Pa,__classPrivateFieldGet:Aa,__classPrivateFieldSet:La}),ur=Dt(Na),$r={},Yt={},Vn;function Ua(){if(Vn)return Yt;Vn=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Yt.delay=t,Yt}var St={},Hr={},Ot={},Gn;function ja(){return Gn||(Gn=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.ONE_THOUSAND=Ot.ONE_HUNDRED=void 0,Ot.ONE_HUNDRED=100,Ot.ONE_THOUSAND=1e3),Ot}var Kr={},qn;function Ma(){return qn||(qn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Kr)),Kr}var Yn;function kn(){return Yn||(Yn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ur;e.__exportStar(ja(),t),e.__exportStar(Ma(),t)}(Hr)),Hr}var Wn;function Fa(){if(Wn)return St;Wn=1,Object.defineProperty(St,"__esModule",{value:!0}),St.fromMiliseconds=St.toMiliseconds=void 0;const t=kn();function e(n){return n*t.ONE_THOUSAND}St.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return St.fromMiliseconds=r,St}var Xn;function Ba(){return Xn||(Xn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ur;e.__exportStar(Ua(),t),e.__exportStar(Fa(),t)}($r)),$r}var Ut={},Jn;function za(){if(Jn)return Ut;Jn=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Ut.Watch=t,Ut.default=t,Ut}var Vr={},kt={},Qn;function $a(){if(Qn)return kt;Qn=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.IWatch=void 0;class t{}return kt.IWatch=t,kt}var Zn;function Ha(){return Zn||(Zn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),ur.__exportStar($a(),t)}(Vr)),Vr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ur;e.__exportStar(Ba(),t),e.__exportStar(za(),t),e.__exportStar(Ha(),t),e.__exportStar(kn(),t)})(q);var Gr={},Wt={};class Ka{}var Va=Object.freeze({__proto__:null,IEvents:Ka}),Ga=Dt(Va),ei;function qa(){if(ei)return Wt;ei=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.IHeartBeat=void 0;const t=Ga;class e extends t.IEvents{constructor(n){super()}}return Wt.IHeartBeat=e,Wt}var ti;function ri(){return ti||(ti=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),cr.__exportStar(qa(),t)}(Gr)),Gr}var qr={},Tt={},ni;function Ya(){if(ni)return Tt;ni=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.HEARTBEAT_EVENTS=Tt.HEARTBEAT_INTERVAL=void 0;const t=q;return Tt.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,Tt.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Tt}var ii;function si(){return ii||(ii=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),cr.__exportStar(Ya(),t)}(qr)),qr}var oi;function ka(){if(oi)return Gt;oi=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.HeartBeat=void 0;const t=cr,e=nt.exports,r=q,n=ri(),i=si();class s extends n.IHeartBeat{constructor(c){super(c),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=c?.interval||i.HEARTBEAT_INTERVAL}static init(c){return t.__awaiter(this,void 0,void 0,function*(){const l=new s(c);return yield l.init(),l})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(c,l){this.events.on(c,l)}once(c,l){this.events.once(c,l)}off(c,l){this.events.off(c,l)}removeListener(c,l){this.events.removeListener(c,l)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Gt.HeartBeat=s,Gt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=cr;e.__exportStar(ka(),t),e.__exportStar(ri(),t),e.__exportStar(si(),t)})(Nt);var k={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Yr=function(t,e){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Yr(t,e)};function Wa(t,e){Yr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var kr=function(){return kr=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},kr.apply(this,arguments)};function Xa(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ja(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Qa(t,e){return function(r,n){e(r,n,t)}}function Za(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ec(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(g){try{u(n.next(g))}catch(O){a(O)}}function l(g){try{u(n.throw(g))}catch(O){a(O)}}function u(g){g.done?s(g.value):i(g.value).then(c,l)}u((n=n.apply(t,e||[])).next())})}function tc(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(g){return l([u,g])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(g){u=[6,g],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function rc(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function nc(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Wr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ai(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function ic(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ai(arguments[e]));return t}function sc(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)n[i]=s[a];return n}function Xt(t){return this instanceof Xt?(this.v=t,this):new Xt(t)}function oc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){n[p]&&(i[p]=function(T){return new Promise(function(I,x){s.push([p,T,I,x])>1||c(p,T)})})}function c(p,T){try{l(n[p](T))}catch(I){O(s[0][3],I)}}function l(p){p.value instanceof Xt?Promise.resolve(p.value.v).then(u,g):O(s[0][2],p)}function u(p){c("next",p)}function g(p){c("throw",p)}function O(p,T){p(T),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ac(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:Xt(t[i](a)),done:i==="return"}:s?s(a):a}:s}}function cc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Wr=="function"?Wr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(c,l){a=t[s](a),i(c,l,a.done,a.value)})}}function i(s,a,c,l){Promise.resolve(l).then(function(u){s({value:u,done:c})},a)}}function uc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function fc(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function lc(t){return t&&t.__esModule?t:{default:t}}function hc(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function dc(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var gc=Object.freeze({__proto__:null,__extends:Wa,get __assign(){return kr},__rest:Xa,__decorate:Ja,__param:Qa,__metadata:Za,__awaiter:ec,__generator:tc,__createBinding:rc,__exportStar:nc,__values:Wr,__read:ai,__spread:ic,__spreadArrays:sc,__await:Xt,__asyncGenerator:oc,__asyncDelegator:ac,__asyncValues:cc,__makeTemplateObject:uc,__importStar:fc,__importDefault:lc,__classPrivateFieldGet:hc,__classPrivateFieldSet:dc}),yc=Dt(gc),Xr,ci;function pc(){if(ci)return Xr;ci=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Xr=e;function e(r,n,i){var s=i&&i.stringify||t,a=1;if(typeof r=="object"&&r!==null){var c=n.length+a;if(c===1)return r;var l=new Array(c);l[0]=s(r);for(var u=1;u<c;u++)l[u]=s(n[u]);return l.join(" ")}if(typeof r!="string")return r;var g=n.length;if(g===0)return r;for(var O="",p=1-a,T=-1,I=r&&r.length||0,x=0;x<I;){if(r.charCodeAt(x)===37&&x+1<I){switch(T=T>-1?T:0,r.charCodeAt(x+1)){case 100:case 102:if(p>=g||n[p]==null)break;T<x&&(O+=r.slice(T,x)),O+=Number(n[p]),T=x+2,x++;break;case 105:if(p>=g||n[p]==null)break;T<x&&(O+=r.slice(T,x)),O+=Math.floor(Number(n[p])),T=x+2,x++;break;case 79:case 111:case 106:if(p>=g||n[p]===void 0)break;T<x&&(O+=r.slice(T,x));var H=typeof n[p];if(H==="string"){O+="'"+n[p]+"'",T=x+2,x++;break}if(H==="function"){O+=n[p].name||"<anonymous>",T=x+2,x++;break}O+=s(n[p]),T=x+2,x++;break;case 115:if(p>=g)break;T<x&&(O+=r.slice(T,x)),O+=String(n[p]),T=x+2,x++;break;case 37:T<x&&(O+=r.slice(T,x)),O+="%",T=x+2,x++,p--;break}++p}++x}return T===-1?r:(T<I&&(O+=r.slice(T)),O)}return Xr}var Jr,ui;function _c(){if(ui)return Jr;ui=1;const t=pc();Jr=i;const e=W().console||{},r={mapHttpRequest:I,mapHttpResponse:I,wrapRequestSerializer:x,wrapResponseSerializer:x,wrapErrorSerializer:x,req:I,res:I,err:p};function n(E,S){return Array.isArray(E)?E.filter(function($){return $!=="!stdSerializers.err"}):E===!0?Object.keys(S):!1}function i(E){E=E||{},E.browser=E.browser||{};const S=E.browser.transmit;if(S&&typeof S.send!="function")throw Error("pino: transmit option must have a send function");const A=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const $=E.serializers||{},M=n(E.browser.serialize,$);let V=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(V=!1);const Y=["error","fatal","warn","info","debug","trace"];typeof A=="function"&&(A.error=A.fatal=A.warn=A.info=A.debug=A.trace=A),E.enabled===!1&&(E.level="silent");const de=E.level||"info",_=Object.create(A);_.log||(_.log=H),Object.defineProperty(_,"levelVal",{get:ee}),Object.defineProperty(_,"level",{get:ue,set:U});const m={transmit:S,serialize:M,asObject:E.browser.asObject,levels:Y,timestamp:T(E)};_.levels=i.levels,_.level=de,_.setMaxListeners=_.getMaxListeners=_.emit=_.addListener=_.on=_.prependListener=_.once=_.prependOnceListener=_.removeListener=_.removeAllListeners=_.listeners=_.listenerCount=_.eventNames=_.write=_.flush=H,_.serializers=$,_._serialize=M,_._stdErrSerialize=V,_.child=C,S&&(_._logEvent=O());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function ue(){return this._level}function U(R){if(R!=="silent"&&!this.levels.values[R])throw Error("unknown level "+R);this._level=R,s(m,_,"error","log"),s(m,_,"fatal","error"),s(m,_,"warn","error"),s(m,_,"info","log"),s(m,_,"debug","log"),s(m,_,"trace","log")}function C(R,N){if(!R)throw new Error("missing bindings for child Pino");N=N||{},M&&R.serializers&&(N.serializers=R.serializers);const ve=N.serializers;if(M&&ve){var ie=Object.assign({},$,ve),bt=E.browser.serialize===!0?Object.keys(ie):M;delete R.serializers,l([R],bt,ie,this._stdErrSerialize)}function G(ke){this._childLevel=(ke._childLevel|0)+1,this.error=u(ke,R,"error"),this.fatal=u(ke,R,"fatal"),this.warn=u(ke,R,"warn"),this.info=u(ke,R,"info"),this.debug=u(ke,R,"debug"),this.trace=u(ke,R,"trace"),ie&&(this.serializers=ie,this._serialize=bt),S&&(this._logEvent=O([].concat(ke._logEvent.bindings,R)))}return G.prototype=this,new G(this)}return _}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:Z,epochTime:K,unixTime:ae,isoTime:ce});function s(E,S,A,$){const M=Object.getPrototypeOf(S);S[A]=S.levelVal>S.levels.values[A]?H:M[A]?M[A]:e[A]||e[$]||H,a(E,S,A)}function a(E,S,A){!E.transmit&&S[A]===H||(S[A]=function($){return function(){const V=E.timestamp(),Y=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var _=0;_<Y.length;_++)Y[_]=arguments[_];if(E.serialize&&!E.asObject&&l(Y,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?$.call(de,c(this,A,Y,V)):$.apply(de,Y),E.transmit){const m=E.transmit.level||S.level,ee=i.levels.values[m],ue=i.levels.values[A];if(ue<ee)return;g(this,{ts:V,methodLevel:A,methodValue:ue,transmitLevel:m,transmitValue:i.levels.values[E.transmit.level||S.level],send:E.transmit.send,val:S.levelVal},Y)}}}(S[A]))}function c(E,S,A,$){E._serialize&&l(A,E._serialize,E.serializers,E._stdErrSerialize);const M=A.slice();let V=M[0];const Y={};$&&(Y.time=$),Y.level=i.levels.values[S];let de=(E._childLevel|0)+1;if(de<1&&(de=1),V!==null&&typeof V=="object"){for(;de--&&typeof M[0]=="object";)Object.assign(Y,M.shift());V=M.length?t(M.shift(),M):void 0}else typeof V=="string"&&(V=t(M.shift(),M));return V!==void 0&&(Y.msg=V),Y}function l(E,S,A,$){for(const M in E)if($&&E[M]instanceof Error)E[M]=i.stdSerializers.err(E[M]);else if(typeof E[M]=="object"&&!Array.isArray(E[M]))for(const V in E[M])S&&S.indexOf(V)>-1&&V in A&&(E[M][V]=A[V](E[M][V]))}function u(E,S,A){return function(){const $=new Array(1+arguments.length);$[0]=S;for(var M=1;M<$.length;M++)$[M]=arguments[M-1];return E[A].apply(this,$)}}function g(E,S,A){const $=S.send,M=S.ts,V=S.methodLevel,Y=S.methodValue,de=S.val,_=E._logEvent.bindings;l(A,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=M,E._logEvent.messages=A.filter(function(m){return _.indexOf(m)===-1}),E._logEvent.level.label=V,E._logEvent.level.value=Y,$(V,E._logEvent,de),E._logEvent=O(_)}function O(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function p(E){const S={type:E.constructor.name,msg:E.message,stack:E.stack};for(const A in E)S[A]===void 0&&(S[A]=E[A]);return S}function T(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?Z:K}function I(){return{}}function x(E){return E}function H(){}function Z(){return!1}function K(){return Date.now()}function ae(){return Math.round(Date.now()/1e3)}function ce(){return new Date(Date.now()).toISOString()}function W(){function E(S){return typeof S<"u"&&S}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return Jr}var It={},fi;function li(){return fi||(fi=1,Object.defineProperty(It,"__esModule",{value:!0}),It.PINO_CUSTOM_CONTEXT_KEY=It.PINO_LOGGER_DEFAULTS=void 0,It.PINO_LOGGER_DEFAULTS={level:"info"},It.PINO_CUSTOM_CONTEXT_KEY="custom_context"),It}var qe={},hi;function bc(){if(hi)return qe;hi=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.generateChildLogger=qe.formatChildLoggerContext=qe.getLoggerContext=qe.setBrowserLoggerContext=qe.getBrowserLoggerContext=qe.getDefaultLoggerOptions=void 0;const t=li();function e(c){return Object.assign(Object.assign({},c),{level:c?.level||t.PINO_LOGGER_DEFAULTS.level})}qe.getDefaultLoggerOptions=e;function r(c,l=t.PINO_CUSTOM_CONTEXT_KEY){return c[l]||""}qe.getBrowserLoggerContext=r;function n(c,l,u=t.PINO_CUSTOM_CONTEXT_KEY){return c[u]=l,c}qe.setBrowserLoggerContext=n;function i(c,l=t.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof c.bindings>"u"?u=r(c,l):u=c.bindings().context||"",u}qe.getLoggerContext=i;function s(c,l,u=t.PINO_CUSTOM_CONTEXT_KEY){const g=i(c,u);return g.trim()?`${g}/${l}`:l}qe.formatChildLoggerContext=s;function a(c,l,u=t.PINO_CUSTOM_CONTEXT_KEY){const g=s(c,l,u),O=c.child({context:g});return n(O,g,u)}return qe.generateChildLogger=a,qe}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=yc,r=e.__importDefault(_c());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(li(),t),e.__exportStar(bc(),t)})(k);const vc=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Ec=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function di(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Ec(t)}catch{return t}}function Qr(t){return typeof t=="string"?t:vc(t)||""}var Zr={},en={},fr={},lr={};Object.defineProperty(lr,"__esModule",{value:!0}),lr.BrowserRandomSource=void 0;const gi=65536;class mc{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=gi)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,gi)));return r}}lr.BrowserRandomSource=mc;function wc(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hr={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});function Dc(t){for(var e=0;e<t.length;e++)t[e]=0;return t}jt.wipe=Dc;var Sc={},Oc=Object.freeze({__proto__:null,default:Sc}),Tc=Dt(Oc);Object.defineProperty(hr,"__esModule",{value:!0}),hr.NodeRandomSource=void 0;const Ic=jt;class Rc{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof wc<"u"){const e=Tc;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Ic.wipe)(r),n}}hr.NodeRandomSource=Rc,Object.defineProperty(fr,"__esModule",{value:!0}),fr.SystemRandomSource=void 0;const xc=lr,Cc=hr;class Pc{constructor(){if(this.isAvailable=!1,this.name="",this._source=new xc.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Cc.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}fr.SystemRandomSource=Pc;var z={},yi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(c,l){var u=c>>>16&65535,g=c&65535,O=l>>>16&65535,p=l&65535;return g*p+(u*p+g*O<<16>>>0)|0}t.mul=Math.imul||e;function r(c,l){return c+l|0}t.add=r;function n(c,l){return c-l|0}t.sub=n;function i(c,l){return c<<l|c>>>32-l}t.rotl=i;function s(c,l){return c<<32-l|c>>>l}t.rotr=s;function a(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c}t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(c){return t.isInteger(c)&&c>=-t.MAX_SAFE_INTEGER&&c<=t.MAX_SAFE_INTEGER}})(yi),Object.defineProperty(z,"__esModule",{value:!0});var pi=yi;function Ac(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}z.readInt16BE=Ac;function Lc(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}z.readUint16BE=Lc;function Nc(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}z.readInt16LE=Nc;function Uc(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}z.readUint16LE=Uc;function _i(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}z.writeUint16BE=_i,z.writeInt16BE=_i;function bi(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}z.writeUint16LE=bi,z.writeInt16LE=bi;function tn(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}z.readInt32BE=tn;function rn(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}z.readUint32BE=rn;function nn(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}z.readInt32LE=nn;function sn(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}z.readUint32LE=sn;function dr(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}z.writeUint32BE=dr,z.writeInt32BE=dr;function gr(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}z.writeUint32LE=gr,z.writeInt32LE=gr;function jc(t,e){e===void 0&&(e=0);var r=tn(t,e),n=tn(t,e+4);return r*4294967296+n-(n>>31)*4294967296}z.readInt64BE=jc;function Mc(t,e){e===void 0&&(e=0);var r=rn(t,e),n=rn(t,e+4);return r*4294967296+n}z.readUint64BE=Mc;function Fc(t,e){e===void 0&&(e=0);var r=nn(t,e),n=nn(t,e+4);return n*4294967296+r-(r>>31)*4294967296}z.readInt64LE=Fc;function Bc(t,e){e===void 0&&(e=0);var r=sn(t,e),n=sn(t,e+4);return n*4294967296+r}z.readUint64LE=Bc;function vi(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),dr(t/4294967296>>>0,e,r),dr(t>>>0,e,r+4),e}z.writeUint64BE=vi,z.writeInt64BE=vi;function Ei(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),gr(t>>>0,e,r),gr(t/4294967296>>>0,e,r+4),e}z.writeUint64LE=Ei,z.writeInt64LE=Ei;function zc(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}z.readUintBE=zc;function $c(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}z.readUintLE=$c;function Hc(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!pi.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}z.writeUintBE=Hc;function Kc(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!pi.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}z.writeUintLE=Kc;function Vc(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}z.readFloat32BE=Vc;function Gc(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}z.readFloat32LE=Gc;function qc(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}z.readFloat64BE=qc;function Yc(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}z.readFloat64LE=Yc;function kc(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}z.writeFloat32BE=kc;function Wc(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}z.writeFloat32LE=Wc;function Xc(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}z.writeFloat64BE=Xc;function Jc(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}z.writeFloat64LE=Jc,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=fr,r=z,n=jt;t.defaultRandomSource=new e.SystemRandomSource;function i(u,g=t.defaultRandomSource){return g.randomBytes(u)}t.randomBytes=i;function s(u=t.defaultRandomSource){const g=i(4,u),O=(0,r.readUint32LE)(g);return(0,n.wipe)(g),O}t.randomUint32=s;const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(u,g=a,O=t.defaultRandomSource){if(g.length<2)throw new Error("randomString charset is too short");if(g.length>256)throw new Error("randomString charset is too long");let p="";const T=g.length,I=256-256%T;for(;u>0;){const x=i(Math.ceil(u*256/I),O);for(let H=0;H<x.length&&u>0;H++){const Z=x[H];Z<I&&(p+=g.charAt(Z%T),u--)}(0,n.wipe)(x)}return p}t.randomString=c;function l(u,g=a,O=t.defaultRandomSource){const p=Math.ceil(u/(Math.log(g.length)/Math.LN2));return c(p,g,O)}t.randomStringForEntropy=l}(en);var mi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=z,r=jt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function c(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return c.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},c.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},c.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},c.prototype.update=function(l,u){if(u===void 0&&(u=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var g=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=l[g++],u--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(g=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,g,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=l[g++],u--;return this},c.prototype.finish=function(l){if(!this._finished){var u=this._bytesHashed,g=this._bufferLength,O=u/536870912|0,p=u<<3,T=u%128<112?128:256;this._buffer[g]=128;for(var I=g+1;I<T-8;I++)this._buffer[I]=0;e.writeUint32BE(O,this._buffer,T-8),e.writeUint32BE(p,this._buffer,T-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,T),this._finished=!0}for(var I=0;I<this.digestLength/8;I++)e.writeUint32BE(this._stateHi[I],l,I*8),e.writeUint32BE(this._stateLo[I],l,I*8+4);return this},c.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},c.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},c.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},c.prototype.cleanSavedState=function(l){r.wipe(l.stateHi),r.wipe(l.stateLo),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},c}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(c,l,u,g,O,p,T){for(var I=u[0],x=u[1],H=u[2],Z=u[3],K=u[4],ae=u[5],ce=u[6],W=u[7],E=g[0],S=g[1],A=g[2],$=g[3],M=g[4],V=g[5],Y=g[6],de=g[7],_,m,ee,ue,U,C,R,N;T>=128;){for(var ve=0;ve<16;ve++){var ie=8*ve+p;c[ve]=e.readUint32BE(O,ie),l[ve]=e.readUint32BE(O,ie+4)}for(var ve=0;ve<80;ve++){var bt=I,G=x,ke=H,v=Z,b=K,y=ae,o=ce,h=W,j=E,F=S,Q=A,te=$,X=M,re=V,$e=Y,Ie=de;if(_=W,m=de,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=(K>>>14|M<<32-14)^(K>>>18|M<<32-18)^(M>>>41-32|K<<32-(41-32)),m=(M>>>14|K<<32-14)^(M>>>18|K<<32-18)^(K>>>41-32|M<<32-(41-32)),U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,_=K&ae^~K&ce,m=M&V^~M&Y,U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,_=i[ve*2],m=i[ve*2+1],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,_=c[ve%16],m=l[ve%16],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,ee=R&65535|N<<16,ue=U&65535|C<<16,_=ee,m=ue,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=(I>>>28|E<<32-28)^(E>>>34-32|I<<32-(34-32))^(E>>>39-32|I<<32-(39-32)),m=(E>>>28|I<<32-28)^(I>>>34-32|E<<32-(34-32))^(I>>>39-32|E<<32-(39-32)),U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,_=I&x^I&H^x&H,m=E&S^E&A^S&A,U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,h=R&65535|N<<16,Ie=U&65535|C<<16,_=v,m=te,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=ee,m=ue,U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,v=R&65535|N<<16,te=U&65535|C<<16,x=bt,H=G,Z=ke,K=v,ae=b,ce=y,W=o,I=h,S=j,A=F,$=Q,M=te,V=X,Y=re,de=$e,E=Ie,ve%16===15)for(var ie=0;ie<16;ie++)_=c[ie],m=l[ie],U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=c[(ie+9)%16],m=l[(ie+9)%16],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,ee=c[(ie+1)%16],ue=l[(ie+1)%16],_=(ee>>>1|ue<<32-1)^(ee>>>8|ue<<32-8)^ee>>>7,m=(ue>>>1|ee<<32-1)^(ue>>>8|ee<<32-8)^(ue>>>7|ee<<32-7),U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,ee=c[(ie+14)%16],ue=l[(ie+14)%16],_=(ee>>>19|ue<<32-19)^(ue>>>61-32|ee<<32-(61-32))^ee>>>6,m=(ue>>>19|ee<<32-19)^(ee>>>61-32|ue<<32-(61-32))^(ue>>>6|ee<<32-6),U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,c[ie]=R&65535|N<<16,l[ie]=U&65535|C<<16}_=I,m=E,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=u[0],m=g[0],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,u[0]=I=R&65535|N<<16,g[0]=E=U&65535|C<<16,_=x,m=S,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=u[1],m=g[1],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,u[1]=x=R&65535|N<<16,g[1]=S=U&65535|C<<16,_=H,m=A,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=u[2],m=g[2],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,u[2]=H=R&65535|N<<16,g[2]=A=U&65535|C<<16,_=Z,m=$,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=u[3],m=g[3],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,u[3]=Z=R&65535|N<<16,g[3]=$=U&65535|C<<16,_=K,m=M,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=u[4],m=g[4],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,u[4]=K=R&65535|N<<16,g[4]=M=U&65535|C<<16,_=ae,m=V,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=u[5],m=g[5],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,u[5]=ae=R&65535|N<<16,g[5]=V=U&65535|C<<16,_=ce,m=Y,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=u[6],m=g[6],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,u[6]=ce=R&65535|N<<16,g[6]=Y=U&65535|C<<16,_=W,m=de,U=m&65535,C=m>>>16,R=_&65535,N=_>>>16,_=u[7],m=g[7],U+=m&65535,C+=m>>>16,R+=_&65535,N+=_>>>16,C+=U>>>16,R+=C>>>16,N+=R>>>16,u[7]=W=R&65535|N<<16,g[7]=de=U&65535|C<<16,p+=128,T-=128}return p}function a(c){var l=new n;l.update(c);var u=l.digest();return l.clean(),u}t.hash=a})(mi),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=en,r=mi,n=jt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(v){const b=new Float64Array(16);if(v)for(let y=0;y<v.length;y++)b[y]=v[y];return b}const s=new Uint8Array(32);s[0]=9;const a=i(),c=i([1]),l=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),g=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(v,b){for(let y=0;y<16;y++)v[y]=b[y]|0}function I(v){let b=1;for(let y=0;y<16;y++){let o=v[y]+b+65535;b=Math.floor(o/65536),v[y]=o-b*65536}v[0]+=b-1+37*(b-1)}function x(v,b,y){const o=~(y-1);for(let h=0;h<16;h++){const j=o&(v[h]^b[h]);v[h]^=j,b[h]^=j}}function H(v,b){const y=i(),o=i();for(let h=0;h<16;h++)o[h]=b[h];I(o),I(o),I(o);for(let h=0;h<2;h++){y[0]=o[0]-65517;for(let F=1;F<15;F++)y[F]=o[F]-65535-(y[F-1]>>16&1),y[F-1]&=65535;y[15]=o[15]-32767-(y[14]>>16&1);const j=y[15]>>16&1;y[14]&=65535,x(o,y,1-j)}for(let h=0;h<16;h++)v[2*h]=o[h]&255,v[2*h+1]=o[h]>>8}function Z(v,b){let y=0;for(let o=0;o<32;o++)y|=v[o]^b[o];return(1&y-1>>>8)-1}function K(v,b){const y=new Uint8Array(32),o=new Uint8Array(32);return H(y,v),H(o,b),Z(y,o)}function ae(v){const b=new Uint8Array(32);return H(b,v),b[0]&1}function ce(v,b){for(let y=0;y<16;y++)v[y]=b[2*y]+(b[2*y+1]<<8);v[15]&=32767}function W(v,b,y){for(let o=0;o<16;o++)v[o]=b[o]+y[o]}function E(v,b,y){for(let o=0;o<16;o++)v[o]=b[o]-y[o]}function S(v,b,y){let o,h,j=0,F=0,Q=0,te=0,X=0,re=0,$e=0,Ie=0,He=0,Ce=0,Re=0,Ee=0,be=0,ge=0,le=0,ne=0,me=0,Pe=0,se=0,Ve=0,We=0,Ze=0,et=0,Xe=0,ut=0,ht=0,vt=0,tt=0,Rt=0,rr=0,Sr=0,we=y[0],ye=y[1],De=y[2],Se=y[3],Oe=y[4],pe=y[5],Ae=y[6],Le=y[7],Ne=y[8],Ue=y[9],je=y[10],xe=y[11],Te=y[12],fe=y[13],Me=y[14],Fe=y[15];o=b[0],j+=o*we,F+=o*ye,Q+=o*De,te+=o*Se,X+=o*Oe,re+=o*pe,$e+=o*Ae,Ie+=o*Le,He+=o*Ne,Ce+=o*Ue,Re+=o*je,Ee+=o*xe,be+=o*Te,ge+=o*fe,le+=o*Me,ne+=o*Fe,o=b[1],F+=o*we,Q+=o*ye,te+=o*De,X+=o*Se,re+=o*Oe,$e+=o*pe,Ie+=o*Ae,He+=o*Le,Ce+=o*Ne,Re+=o*Ue,Ee+=o*je,be+=o*xe,ge+=o*Te,le+=o*fe,ne+=o*Me,me+=o*Fe,o=b[2],Q+=o*we,te+=o*ye,X+=o*De,re+=o*Se,$e+=o*Oe,Ie+=o*pe,He+=o*Ae,Ce+=o*Le,Re+=o*Ne,Ee+=o*Ue,be+=o*je,ge+=o*xe,le+=o*Te,ne+=o*fe,me+=o*Me,Pe+=o*Fe,o=b[3],te+=o*we,X+=o*ye,re+=o*De,$e+=o*Se,Ie+=o*Oe,He+=o*pe,Ce+=o*Ae,Re+=o*Le,Ee+=o*Ne,be+=o*Ue,ge+=o*je,le+=o*xe,ne+=o*Te,me+=o*fe,Pe+=o*Me,se+=o*Fe,o=b[4],X+=o*we,re+=o*ye,$e+=o*De,Ie+=o*Se,He+=o*Oe,Ce+=o*pe,Re+=o*Ae,Ee+=o*Le,be+=o*Ne,ge+=o*Ue,le+=o*je,ne+=o*xe,me+=o*Te,Pe+=o*fe,se+=o*Me,Ve+=o*Fe,o=b[5],re+=o*we,$e+=o*ye,Ie+=o*De,He+=o*Se,Ce+=o*Oe,Re+=o*pe,Ee+=o*Ae,be+=o*Le,ge+=o*Ne,le+=o*Ue,ne+=o*je,me+=o*xe,Pe+=o*Te,se+=o*fe,Ve+=o*Me,We+=o*Fe,o=b[6],$e+=o*we,Ie+=o*ye,He+=o*De,Ce+=o*Se,Re+=o*Oe,Ee+=o*pe,be+=o*Ae,ge+=o*Le,le+=o*Ne,ne+=o*Ue,me+=o*je,Pe+=o*xe,se+=o*Te,Ve+=o*fe,We+=o*Me,Ze+=o*Fe,o=b[7],Ie+=o*we,He+=o*ye,Ce+=o*De,Re+=o*Se,Ee+=o*Oe,be+=o*pe,ge+=o*Ae,le+=o*Le,ne+=o*Ne,me+=o*Ue,Pe+=o*je,se+=o*xe,Ve+=o*Te,We+=o*fe,Ze+=o*Me,et+=o*Fe,o=b[8],He+=o*we,Ce+=o*ye,Re+=o*De,Ee+=o*Se,be+=o*Oe,ge+=o*pe,le+=o*Ae,ne+=o*Le,me+=o*Ne,Pe+=o*Ue,se+=o*je,Ve+=o*xe,We+=o*Te,Ze+=o*fe,et+=o*Me,Xe+=o*Fe,o=b[9],Ce+=o*we,Re+=o*ye,Ee+=o*De,be+=o*Se,ge+=o*Oe,le+=o*pe,ne+=o*Ae,me+=o*Le,Pe+=o*Ne,se+=o*Ue,Ve+=o*je,We+=o*xe,Ze+=o*Te,et+=o*fe,Xe+=o*Me,ut+=o*Fe,o=b[10],Re+=o*we,Ee+=o*ye,be+=o*De,ge+=o*Se,le+=o*Oe,ne+=o*pe,me+=o*Ae,Pe+=o*Le,se+=o*Ne,Ve+=o*Ue,We+=o*je,Ze+=o*xe,et+=o*Te,Xe+=o*fe,ut+=o*Me,ht+=o*Fe,o=b[11],Ee+=o*we,be+=o*ye,ge+=o*De,le+=o*Se,ne+=o*Oe,me+=o*pe,Pe+=o*Ae,se+=o*Le,Ve+=o*Ne,We+=o*Ue,Ze+=o*je,et+=o*xe,Xe+=o*Te,ut+=o*fe,ht+=o*Me,vt+=o*Fe,o=b[12],be+=o*we,ge+=o*ye,le+=o*De,ne+=o*Se,me+=o*Oe,Pe+=o*pe,se+=o*Ae,Ve+=o*Le,We+=o*Ne,Ze+=o*Ue,et+=o*je,Xe+=o*xe,ut+=o*Te,ht+=o*fe,vt+=o*Me,tt+=o*Fe,o=b[13],ge+=o*we,le+=o*ye,ne+=o*De,me+=o*Se,Pe+=o*Oe,se+=o*pe,Ve+=o*Ae,We+=o*Le,Ze+=o*Ne,et+=o*Ue,Xe+=o*je,ut+=o*xe,ht+=o*Te,vt+=o*fe,tt+=o*Me,Rt+=o*Fe,o=b[14],le+=o*we,ne+=o*ye,me+=o*De,Pe+=o*Se,se+=o*Oe,Ve+=o*pe,We+=o*Ae,Ze+=o*Le,et+=o*Ne,Xe+=o*Ue,ut+=o*je,ht+=o*xe,vt+=o*Te,tt+=o*fe,Rt+=o*Me,rr+=o*Fe,o=b[15],ne+=o*we,me+=o*ye,Pe+=o*De,se+=o*Se,Ve+=o*Oe,We+=o*pe,Ze+=o*Ae,et+=o*Le,Xe+=o*Ne,ut+=o*Ue,ht+=o*je,vt+=o*xe,tt+=o*Te,Rt+=o*fe,rr+=o*Me,Sr+=o*Fe,j+=38*me,F+=38*Pe,Q+=38*se,te+=38*Ve,X+=38*We,re+=38*Ze,$e+=38*et,Ie+=38*Xe,He+=38*ut,Ce+=38*ht,Re+=38*vt,Ee+=38*tt,be+=38*Rt,ge+=38*rr,le+=38*Sr,h=1,o=j+h+65535,h=Math.floor(o/65536),j=o-h*65536,o=F+h+65535,h=Math.floor(o/65536),F=o-h*65536,o=Q+h+65535,h=Math.floor(o/65536),Q=o-h*65536,o=te+h+65535,h=Math.floor(o/65536),te=o-h*65536,o=X+h+65535,h=Math.floor(o/65536),X=o-h*65536,o=re+h+65535,h=Math.floor(o/65536),re=o-h*65536,o=$e+h+65535,h=Math.floor(o/65536),$e=o-h*65536,o=Ie+h+65535,h=Math.floor(o/65536),Ie=o-h*65536,o=He+h+65535,h=Math.floor(o/65536),He=o-h*65536,o=Ce+h+65535,h=Math.floor(o/65536),Ce=o-h*65536,o=Re+h+65535,h=Math.floor(o/65536),Re=o-h*65536,o=Ee+h+65535,h=Math.floor(o/65536),Ee=o-h*65536,o=be+h+65535,h=Math.floor(o/65536),be=o-h*65536,o=ge+h+65535,h=Math.floor(o/65536),ge=o-h*65536,o=le+h+65535,h=Math.floor(o/65536),le=o-h*65536,o=ne+h+65535,h=Math.floor(o/65536),ne=o-h*65536,j+=h-1+37*(h-1),h=1,o=j+h+65535,h=Math.floor(o/65536),j=o-h*65536,o=F+h+65535,h=Math.floor(o/65536),F=o-h*65536,o=Q+h+65535,h=Math.floor(o/65536),Q=o-h*65536,o=te+h+65535,h=Math.floor(o/65536),te=o-h*65536,o=X+h+65535,h=Math.floor(o/65536),X=o-h*65536,o=re+h+65535,h=Math.floor(o/65536),re=o-h*65536,o=$e+h+65535,h=Math.floor(o/65536),$e=o-h*65536,o=Ie+h+65535,h=Math.floor(o/65536),Ie=o-h*65536,o=He+h+65535,h=Math.floor(o/65536),He=o-h*65536,o=Ce+h+65535,h=Math.floor(o/65536),Ce=o-h*65536,o=Re+h+65535,h=Math.floor(o/65536),Re=o-h*65536,o=Ee+h+65535,h=Math.floor(o/65536),Ee=o-h*65536,o=be+h+65535,h=Math.floor(o/65536),be=o-h*65536,o=ge+h+65535,h=Math.floor(o/65536),ge=o-h*65536,o=le+h+65535,h=Math.floor(o/65536),le=o-h*65536,o=ne+h+65535,h=Math.floor(o/65536),ne=o-h*65536,j+=h-1+37*(h-1),v[0]=j,v[1]=F,v[2]=Q,v[3]=te,v[4]=X,v[5]=re,v[6]=$e,v[7]=Ie,v[8]=He,v[9]=Ce,v[10]=Re,v[11]=Ee,v[12]=be,v[13]=ge,v[14]=le,v[15]=ne}function A(v,b){S(v,b,b)}function $(v,b){const y=i();let o;for(o=0;o<16;o++)y[o]=b[o];for(o=253;o>=0;o--)A(y,y),o!==2&&o!==4&&S(y,y,b);for(o=0;o<16;o++)v[o]=y[o]}function M(v,b){const y=i();let o;for(o=0;o<16;o++)y[o]=b[o];for(o=250;o>=0;o--)A(y,y),o!==1&&S(y,y,b);for(o=0;o<16;o++)v[o]=y[o]}function V(v,b){const y=i(),o=i(),h=i(),j=i(),F=i(),Q=i(),te=i(),X=i(),re=i();E(y,v[1],v[0]),E(re,b[1],b[0]),S(y,y,re),W(o,v[0],v[1]),W(re,b[0],b[1]),S(o,o,re),S(h,v[3],b[3]),S(h,h,u),S(j,v[2],b[2]),W(j,j,j),E(F,o,y),E(Q,j,h),W(te,j,h),W(X,o,y),S(v[0],F,Q),S(v[1],X,te),S(v[2],te,Q),S(v[3],F,X)}function Y(v,b,y){for(let o=0;o<4;o++)x(v[o],b[o],y)}function de(v,b){const y=i(),o=i(),h=i();$(h,b[2]),S(y,b[0],h),S(o,b[1],h),H(v,o),v[31]^=ae(y)<<7}function _(v,b,y){T(v[0],a),T(v[1],c),T(v[2],c),T(v[3],a);for(let o=255;o>=0;--o){const h=y[o/8|0]>>(o&7)&1;Y(v,b,h),V(b,v),V(v,v),Y(v,b,h)}}function m(v,b){const y=[i(),i(),i(),i()];T(y[0],g),T(y[1],O),T(y[2],c),S(y[3],g,O),_(v,y,b)}function ee(v){if(v.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const b=(0,r.hash)(v);b[0]&=248,b[31]&=127,b[31]|=64;const y=new Uint8Array(32),o=[i(),i(),i(),i()];m(o,b),de(y,o);const h=new Uint8Array(64);return h.set(v),h.set(y,32),{publicKey:y,secretKey:h}}t.generateKeyPairFromSeed=ee;function ue(v){const b=(0,e.randomBytes)(32,v),y=ee(b);return(0,n.wipe)(b),y}t.generateKeyPair=ue;function U(v){if(v.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(v.subarray(32))}t.extractPublicKeyFromSecretKey=U;const C=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function R(v,b){let y,o,h,j;for(o=63;o>=32;--o){for(y=0,h=o-32,j=o-12;h<j;++h)b[h]+=y-16*b[o]*C[h-(o-32)],y=Math.floor((b[h]+128)/256),b[h]-=y*256;b[h]+=y,b[o]=0}for(y=0,h=0;h<32;h++)b[h]+=y-(b[31]>>4)*C[h],y=b[h]>>8,b[h]&=255;for(h=0;h<32;h++)b[h]-=y*C[h];for(o=0;o<32;o++)b[o+1]+=b[o]>>8,v[o]=b[o]&255}function N(v){const b=new Float64Array(64);for(let y=0;y<64;y++)b[y]=v[y];for(let y=0;y<64;y++)v[y]=0;R(v,b)}function ve(v,b){const y=new Float64Array(64),o=[i(),i(),i(),i()],h=(0,r.hash)(v.subarray(0,32));h[0]&=248,h[31]&=127,h[31]|=64;const j=new Uint8Array(64);j.set(h.subarray(32),32);const F=new r.SHA512;F.update(j.subarray(32)),F.update(b);const Q=F.digest();F.clean(),N(Q),m(o,Q),de(j,o),F.reset(),F.update(j.subarray(0,32)),F.update(v.subarray(32)),F.update(b);const te=F.digest();N(te);for(let X=0;X<32;X++)y[X]=Q[X];for(let X=0;X<32;X++)for(let re=0;re<32;re++)y[X+re]+=te[X]*h[re];return R(j.subarray(32),y),j}t.sign=ve;function ie(v,b){const y=i(),o=i(),h=i(),j=i(),F=i(),Q=i(),te=i();return T(v[2],c),ce(v[1],b),A(h,v[1]),S(j,h,l),E(h,h,v[2]),W(j,v[2],j),A(F,j),A(Q,F),S(te,Q,F),S(y,te,h),S(y,y,j),M(y,y),S(y,y,h),S(y,y,j),S(y,y,j),S(v[0],y,j),A(o,v[0]),S(o,o,j),K(o,h)&&S(v[0],v[0],p),A(o,v[0]),S(o,o,j),K(o,h)?-1:(ae(v[0])===b[31]>>7&&E(v[0],a,v[0]),S(v[3],v[0],v[1]),0)}function bt(v,b,y){const o=new Uint8Array(32),h=[i(),i(),i(),i()],j=[i(),i(),i(),i()];if(y.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(ie(j,v))return!1;const F=new r.SHA512;F.update(y.subarray(0,32)),F.update(v),F.update(b);const Q=F.digest();return N(Q),_(h,j,Q),m(j,y.subarray(32)),V(h,j),de(o,h),!Z(y,o)}t.verify=bt;function G(v){let b=[i(),i(),i(),i()];if(ie(b,v))throw new Error("Ed25519: invalid public key");let y=i(),o=i(),h=b[1];W(y,c,h),E(o,c,h),$(o,o),S(y,y,o);let j=new Uint8Array(32);return H(j,y),j}t.convertPublicKeyToX25519=G;function ke(v){const b=(0,r.hash)(v.subarray(0,32));b[0]&=248,b[31]&=127,b[31]|=64;const y=new Uint8Array(b.subarray(0,32));return(0,n.wipe)(b),y}t.convertSecretKeyToX25519=ke}(Zr);const Qc="EdDSA",Zc="JWT",wi=".",Di="base64url",eu="utf8",tu="utf8",ru=":",nu="did",iu="key",Si="base58btc",su="z",ou="K36",au=32;function on(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Oi(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?on(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function cu(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=Oi(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return on(r)}function uu(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=i}var c=t.length,l=t.charAt(0),u=Math.log(c)/Math.log(256),g=Math.log(256)/Math.log(c);function O(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var x=0,H=0,Z=0,K=I.length;Z!==K&&I[Z]===0;)Z++,x++;for(var ae=(K-Z)*g+1>>>0,ce=new Uint8Array(ae);Z!==K;){for(var W=I[Z],E=0,S=ae-1;(W!==0||E<H)&&S!==-1;S--,E++)W+=256*ce[S]>>>0,ce[S]=W%c>>>0,W=W/c>>>0;if(W!==0)throw new Error("Non-zero carry");H=E,Z++}for(var A=ae-H;A!==ae&&ce[A]===0;)A++;for(var $=l.repeat(x);A<ae;++A)$+=t.charAt(ce[A]);return $}function p(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var x=0;if(I[x]!==" "){for(var H=0,Z=0;I[x]===l;)H++,x++;for(var K=(I.length-x)*u+1>>>0,ae=new Uint8Array(K);I[x];){var ce=r[I.charCodeAt(x)];if(ce===255)return;for(var W=0,E=K-1;(ce!==0||W<Z)&&E!==-1;E--,W++)ce+=c*ae[E]>>>0,ae[E]=ce%256>>>0,ce=ce/256>>>0;if(ce!==0)throw new Error("Non-zero carry");Z=W,x++}if(I[x]!==" "){for(var S=K-Z;S!==K&&ae[S]===0;)S++;for(var A=new Uint8Array(H+(K-S)),$=H;S!==K;)A[$++]=ae[S++];return A}}}function T(I){var x=p(I);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:p,decode:T}}var fu=uu,lu=fu;const Ti=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},hu=t=>new TextEncoder().encode(t),du=t=>new TextDecoder().decode(t);class gu{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class yu{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ii(this,e)}}class pu{constructor(e){this.decoders=e}or(e){return Ii(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ii=(t,e)=>new pu({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class _u{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new gu(e,r,n),this.decoder=new yu(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const yr=({name:t,prefix:e,encode:r,decode:n})=>new _u(t,e,r,n),Jt=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=lu(r,e);return yr({prefix:t,name:e,encode:n,decode:s=>Ti(i(s))})},bu=(t,e,r,n)=>{const i={};for(let g=0;g<e.length;++g)i[e[g]]=g;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let c=0,l=0,u=0;for(let g=0;g<s;++g){const O=i[t[g]];if(O===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|O,c+=r,c>=8&&(c-=8,a[u++]=255&l>>c)}if(c>=r||255&l<<8-c)throw new SyntaxError("Unexpected end of data");return a},vu=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",a=0,c=0;for(let l=0;l<t.length;++l)for(c=c<<8|t[l],a+=8;a>r;)a-=r,s+=e[i&c>>a];if(a&&(s+=e[i&c<<r-a]),n)for(;s.length*r&7;)s+="=";return s},ze=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>yr({prefix:e,name:t,encode(i){return vu(i,n,r)},decode(i){return bu(i,n,r,t)}}),Eu=yr({prefix:"\0",name:"identity",encode:t=>du(t),decode:t=>hu(t)});var mu=Object.freeze({__proto__:null,identity:Eu});const wu=ze({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Du=Object.freeze({__proto__:null,base2:wu});const Su=ze({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ou=Object.freeze({__proto__:null,base8:Su});const Tu=Jt({prefix:"9",name:"base10",alphabet:"0123456789"});var Iu=Object.freeze({__proto__:null,base10:Tu});const Ru=ze({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xu=ze({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Cu=Object.freeze({__proto__:null,base16:Ru,base16upper:xu});const Pu=ze({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Au=ze({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Lu=ze({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Nu=ze({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Uu=ze({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ju=ze({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Mu=ze({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Fu=ze({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bu=ze({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var zu=Object.freeze({__proto__:null,base32:Pu,base32upper:Au,base32pad:Lu,base32padupper:Nu,base32hex:Uu,base32hexupper:ju,base32hexpad:Mu,base32hexpadupper:Fu,base32z:Bu});const $u=Jt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Hu=Jt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ku=Object.freeze({__proto__:null,base36:$u,base36upper:Hu});const Vu=Jt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Gu=Jt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qu=Object.freeze({__proto__:null,base58btc:Vu,base58flickr:Gu});const Yu=ze({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ku=ze({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wu=ze({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Xu=ze({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ju=Object.freeze({__proto__:null,base64:Yu,base64pad:ku,base64url:Wu,base64urlpad:Xu});const Ri=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Qu=Ri.reduce((t,e,r)=>(t[r]=e,t),[]),Zu=Ri.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ef(t){return t.reduce((e,r)=>(e+=Qu[r],e),"")}function tf(t){const e=[];for(const r of t){const n=Zu[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const rf=yr({prefix:"\u{1F680}",name:"base256emoji",encode:ef,decode:tf});var nf=Object.freeze({__proto__:null,base256emoji:rf}),sf=Ci,xi=128,of=127,af=~of,cf=Math.pow(2,31);function Ci(t,e,r){e=e||[],r=r||0;for(var n=r;t>=cf;)e[r++]=t&255|xi,t/=128;for(;t&af;)e[r++]=t&255|xi,t>>>=7;return e[r]=t|0,Ci.bytes=r-n+1,e}var uf=an,ff=128,Pi=127;function an(t,n){var r=0,n=n||0,i=0,s=n,a,c=t.length;do{if(s>=c)throw an.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=i<28?(a&Pi)<<i:(a&Pi)*Math.pow(2,i),i+=7}while(a>=ff);return an.bytes=s-n,r}var lf=Math.pow(2,7),hf=Math.pow(2,14),df=Math.pow(2,21),gf=Math.pow(2,28),yf=Math.pow(2,35),pf=Math.pow(2,42),_f=Math.pow(2,49),bf=Math.pow(2,56),vf=Math.pow(2,63),Ef=function(t){return t<lf?1:t<hf?2:t<df?3:t<gf?4:t<yf?5:t<pf?6:t<_f?7:t<bf?8:t<vf?9:10},mf={encode:sf,decode:uf,encodingLength:Ef},Ai=mf;const Li=(t,e,r=0)=>(Ai.encode(t,e,r),e),Ni=t=>Ai.encodingLength(t),cn=(t,e)=>{const r=e.byteLength,n=Ni(t),i=n+Ni(r),s=new Uint8Array(i+r);return Li(t,s,0),Li(r,s,n),s.set(e,i),new wf(t,r,e,s)};class wf{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Ui=({name:t,code:e,encode:r})=>new Df(t,e,r);class Df{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?cn(this.code,r):r.then(n=>cn(this.code,n))}else throw Error("Unknown type, must be binary type")}}const ji=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Sf=Ui({name:"sha2-256",code:18,encode:ji("SHA-256")}),Of=Ui({name:"sha2-512",code:19,encode:ji("SHA-512")});var Tf=Object.freeze({__proto__:null,sha256:Sf,sha512:Of});const Mi=0,If="identity",Fi=Ti;var Rf=Object.freeze({__proto__:null,identity:{code:Mi,name:If,encode:Fi,digest:t=>cn(Mi,Fi(t))}});new TextEncoder,new TextDecoder;const Bi={...mu,...Du,...Ou,...Iu,...Cu,...zu,...Ku,...qu,...Ju,...nf};({...Tf,...Rf});function zi(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const $i=zi("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),un=zi("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Oi(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Hi={utf8:$i,"utf-8":$i,hex:Bi.base16,latin1:un,ascii:un,binary:un,...Bi};function pr(t,e="utf8"){const r=Hi[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function _r(t,e="utf8"){const r=Hi[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?on(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function br(t){return pr(_r(Qr(t),eu),Di)}function Ki(t){const e=_r(ou,Si),r=su+pr(cu([e,t]),Si);return[nu,iu,r].join(ru)}function xf(t){return pr(t,Di)}function Cf(t){return _r([br(t.header),br(t.payload)].join(wi),tu)}function Pf(t){return[br(t.header),br(t.payload),xf(t.signature)].join(wi)}function Vi(t=en.randomBytes(au)){return Zr.generateKeyPairFromSeed(t)}async function Af(t,e,r,n,i=q.fromMiliseconds(Date.now())){const s={alg:Qc,typ:Zc},a=Ki(n.publicKey),c=i+r,l={iss:a,sub:t,aud:e,iat:i,exp:c},u=Cf({header:s,payload:l}),g=Zr.sign(n.secretKey,u);return Pf({header:s,payload:l,signature:g})}const fn="wc",Gi=2,vr="core",dt=`${fn}@2:${vr}:`,qi={name:vr,logger:"error"},Yi={database:":memory:"},ki="crypto",ln="client_ed25519_seed",Wi=q.ONE_DAY,Xi="keychain",Ji="0.3",Qi="messages",Zi="0.3",es=q.SIX_HOURS,ts="publisher",rs="irn",ns="error",hn="wss://relay.walletconnect.com",dn="wss://relay.walletconnect.org",is="relayer",Ye={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ss="_subscription",lt={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},os=q.ONE_SECOND,Lf={database:":memory:"},as="2.10.2",cs=1e4,us="0.3",fs="WALLETCONNECT_CLIENT_ID",it={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Nf=q.THIRTY_DAYS,ls="subscription",hs="0.3",ds=q.FIVE_SECONDS*1e3,gs="pairing",ys="0.3",Uf=q.THIRTY_DAYS,Mt={wc_pairingDelete:{req:{ttl:q.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:q.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:q.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:q.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:q.ONE_DAY,prompt:!1,tag:0},res:{ttl:q.ONE_DAY,prompt:!1,tag:0}}},Qt={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ct={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},ps="history",_s="0.3",bs="expirer",st={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},vs="0.3",jf=q.ONE_DAY,Er="verify-api",mr="https://verify.walletconnect.com",gn="https://verify.walletconnect.org";class Es{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Xi,this.version=Ji,this.initialized=!1,this.storagePrefix=dt,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=D.getInternalError("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=k.generateChildLogger(r,this.name)}get context(){return k.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,D.mapToObj(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?D.objToMap(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ms{constructor(e,r,n){this.core=e,this.logger=r,this.name=ki,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Vi(i);return Ki(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=D.generateKeyPair();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),a=Vi(s),c=D.generateRandomBytes32();return await Af(c,i,Wi,a)},this.generateSharedKey=(i,s,a)=>{this.isInitialized();const c=this.getPrivateKey(i),l=D.deriveSymKey(c,s);return this.setSymKey(l,a)},this.setSymKey=async(i,s)=>{this.isInitialized();const a=s||D.hashKey(i);return await this.keychain.set(a,i),a},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,a)=>{this.isInitialized();const c=D.validateEncoding(a),l=Qr(s);if(D.isTypeOneEnvelope(c)){const p=c.senderPublicKey,T=c.receiverPublicKey;i=await this.generateSharedKey(p,T)}const u=this.getSymKey(i),{type:g,senderPublicKey:O}=c;return D.encrypt({type:g,symKey:u,message:l,senderPublicKey:O})},this.decode=async(i,s,a)=>{this.isInitialized();const c=D.validateDecoding(s,a);if(D.isTypeOneEnvelope(c)){const l=c.receiverPublicKey,u=c.senderPublicKey;i=await this.generateSharedKey(l,u)}try{const l=this.getSymKey(i),u=D.decrypt({symKey:l,encoded:s});return di(u)}catch(l){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}},this.getPayloadType=i=>{const s=D.deserialize(i);return D.decodeTypeByte(s.type)},this.getPayloadSenderPublicKey=i=>{const s=D.deserialize(i);return s.senderPublicKey?pr(s.senderPublicKey,D.BASE16):void 0},this.core=e,this.logger=k.generateChildLogger(r,this.name),this.keychain=n||new Es(this.core,this.logger)}get context(){return k.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ln)}catch{e=D.generateRandomBytes32(),await this.keychain.set(ln,e)}return _r(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ws extends Je.IMessageTracker{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Qi,this.version=Zi,this.initialized=!1,this.storagePrefix=dt,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=D.hashMessage(i);let a=this.messages.get(n);return typeof a>"u"&&(a={}),typeof a[s]<"u"||(a[s]=i,this.messages.set(n,a),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),a=D.hashMessage(i);return typeof s[a]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=k.generateChildLogger(e,this.name),this.core=r}get context(){return k.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,D.mapToObj(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?D.objToMap(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}const Mf="PARSE_ERROR",Ff="INVALID_REQUEST",Bf="METHOD_NOT_FOUND",zf="INVALID_PARAMS",Ds="INTERNAL_ERROR",yn="SERVER_ERROR",$f=[-32700,-32600,-32601,-32602,-32603],Zt={[Mf]:{code:-32700,message:"Parse error"},[Ff]:{code:-32600,message:"Invalid Request"},[Bf]:{code:-32601,message:"Method not found"},[zf]:{code:-32602,message:"Invalid params"},[Ds]:{code:-32603,message:"Internal error"},[yn]:{code:-32e3,message:"Server error"}},Ss=yn;function Hf(t){return $f.includes(t)}function Os(t){return Object.keys(Zt).includes(t)?Zt[t]:Zt[Ss]}function Kf(t){const e=Object.values(Zt).find(r=>r.code===t);return e||Zt[Ss]}function Vf(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Ts={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var pn=function(t,e){return pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},pn(t,e)};function Gf(t,e){pn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _n=function(){return _n=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_n.apply(this,arguments)};function qf(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Yf(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function kf(t,e){return function(r,n){e(r,n,t)}}function Wf(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Xf(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(g){try{u(n.next(g))}catch(O){a(O)}}function l(g){try{u(n.throw(g))}catch(O){a(O)}}function u(g){g.done?s(g.value):i(g.value).then(c,l)}u((n=n.apply(t,e||[])).next())})}function Jf(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(g){return l([u,g])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(g){u=[6,g],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Qf(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Zf(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function bn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Is(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function el(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Is(arguments[e]));return t}function tl(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)n[i]=s[a];return n}function er(t){return this instanceof er?(this.v=t,this):new er(t)}function rl(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){n[p]&&(i[p]=function(T){return new Promise(function(I,x){s.push([p,T,I,x])>1||c(p,T)})})}function c(p,T){try{l(n[p](T))}catch(I){O(s[0][3],I)}}function l(p){p.value instanceof er?Promise.resolve(p.value.v).then(u,g):O(s[0][2],p)}function u(p){c("next",p)}function g(p){c("throw",p)}function O(p,T){p(T),s.shift(),s.length&&c(s[0][0],s[0][1])}}function nl(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:er(t[i](a)),done:i==="return"}:s?s(a):a}:s}}function il(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof bn=="function"?bn(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(c,l){a=t[s](a),i(c,l,a.done,a.value)})}}function i(s,a,c,l){Promise.resolve(l).then(function(u){s({value:u,done:c})},a)}}function sl(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ol(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function al(t){return t&&t.__esModule?t:{default:t}}function cl(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ul(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var fl=Object.freeze({__proto__:null,__extends:Gf,get __assign(){return _n},__rest:qf,__decorate:Yf,__param:kf,__metadata:Wf,__awaiter:Xf,__generator:Jf,__createBinding:Qf,__exportStar:Zf,__values:bn,__read:Is,__spread:el,__spreadArrays:tl,__await:er,__asyncGenerator:rl,__asyncDelegator:nl,__asyncValues:il,__makeTemplateObject:sl,__importStar:ol,__importDefault:al,__classPrivateFieldGet:cl,__classPrivateFieldSet:ul}),ll=Dt(fl),gt={},Rs;function hl(){if(Rs)return gt;Rs=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.isBrowserCryptoAvailable=gt.getSubtleCrypto=gt.getBrowerCrypto=void 0;function t(){return Qe?.crypto||Qe?.msCrypto||{}}gt.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}gt.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return gt.isBrowserCryptoAvailable=r,gt}var yt={},xs;function dl(){if(xs)return yt;xs=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.isBrowser=yt.isNode=yt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}yt.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}yt.isNode=e;function r(){return!t()&&!e()}return yt.isBrowser=r,yt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ll;e.__exportStar(hl(),t),e.__exportStar(dl(),t)})(Ts);function Cs(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Ps(t=6){return BigInt(Cs(t))}function vn(t,e,r){return{id:r||Cs(),jsonrpc:"2.0",method:t,params:e}}function As(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Ls(t,e,r){return{id:t,jsonrpc:"2.0",error:gl(e,r)}}function gl(t,e){return typeof t>"u"?Os(Ds):(typeof t=="string"&&(t=Object.assign(Object.assign({},Os(yn)),{message:t})),typeof e<"u"&&(t.data=e),Hf(t.code)&&(t=Kf(t.code)),t)}class yl{}class pl extends yl{constructor(){super()}}class _l extends pl{constructor(e){super()}}const bl="^wss?:";function vl(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function El(t,e){const r=vl(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Ns(t){return El(t,bl)}function ml(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Us(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function js(t){return Us(t)&&"method"in t}function En(t){return Us(t)&&(Ms(t)||wr(t))}function Ms(t){return"result"in t}function wr(t){return"error"in t}class wl extends _l{constructor(e){super(e),this.events=new nt.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(vn(e.method,e.params||[],e.id||Ps().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{wr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),En(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Dl=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Sl=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Fs=t=>t.split("?")[0],Bs=10,Ol=Dl();class Tl{constructor(e){if(this.url=e,this.events=new nt.exports.EventEmitter,this.registering=!1,!Ns(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Qr(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Ns(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Ts.isReactNative()?void 0:{rejectUnauthorized:!ml(e)},s=new Ol(e,[],i);Sl()?s.onerror=a=>{const c=a;n(this.emitError(c.error))}:s.on("error",a=>{n(this.emitError(a))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?di(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Ls(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Vf(e,Fs(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Bs&&this.events.setMaxListeners(Bs)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Fs(this.url)}`));return this.events.emit("register_error",r),r}}class Il extends Je.IPublisher{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new nt.exports.EventEmitter,this.name=ts,this.queue=new Map,this.publishTimeout=q.toMiliseconds(q.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var a;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const c=s?.ttl||es,l=D.getRelayProtocolName(s),u=s?.prompt||!1,g=s?.tag||0,O=s?.id||Ps().toString(),p={topic:n,message:i,opts:{ttl:c,relay:l,prompt:u,tag:g,id:O}},T=setTimeout(()=>this.queue.set(O,p),this.publishTimeout);try{await await D.createExpiringPromise(this.rpcPublish(n,i,c,l,u,g,O),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(O),this.relayer.events.emit(Ye.publish,p)}catch(I){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(a=s?.internal)!=null&&a.throwOnFailedPublish)throw this.removeRequestFromQueue(O),I;return}finally{clearTimeout(T)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(c){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(c),c}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=k.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return k.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,a,c){var l,u,g,O;const p={method:D.getRelayProtocolApi(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:a},id:c};return D.isUndefined((l=p.params)==null?void 0:l.prompt)&&((u=p.params)==null||delete u.prompt),D.isUndefined((g=p.params)==null?void 0:g.tag)&&((O=p.params)==null||delete O.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Nt.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ye.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ye.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Rl{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var xl=Object.defineProperty,Cl=Object.defineProperties,Pl=Object.getOwnPropertyDescriptors,zs=Object.getOwnPropertySymbols,Al=Object.prototype.hasOwnProperty,Ll=Object.prototype.propertyIsEnumerable,$s=(t,e,r)=>e in t?xl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tr=(t,e)=>{for(var r in e||(e={}))Al.call(e,r)&&$s(t,r,e[r]);if(zs)for(var r of zs(e))Ll.call(e,r)&&$s(t,r,e[r]);return t},mn=(t,e)=>Cl(t,Pl(e));class Hs extends Je.ISubscriber{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Rl,this.events=new nt.exports.EventEmitter,this.name=ls,this.version=hs,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=dt,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=D.getRelayProtocolName(i),a={topic:n,relay:s};this.pending.set(n,a);const c=await this.rpcSubscribe(n,s);return this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),c}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const a=new q.Watch;a.start(this.pendingSubscriptionWatchLabel);const c=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(c),a.stop(this.pendingSubscriptionWatchLabel),i(!0)),a.elapsed(this.pendingSubscriptionWatchLabel)>=ds&&(clearInterval(c),a.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=k.generateChildLogger(r,this.name),this.clientId=""}get context(){return k.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=D.getRelayProtocolName(n);await this.rpcUnsubscribe(e,r,i);const s=D.getSdkError("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:D.getRelayProtocolApi(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await D.createExpiringPromise(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ye.connection_stalled)}return D.hashMessage(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:D.getRelayProtocolApi(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await D.createExpiringPromise(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ye.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:D.getRelayProtocolApi(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,mn(tr({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,tr({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,tr({},r)),this.topicMap.set(r.topic,e),this.events.emit(it.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=D.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(it.deleted,mn(tr({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(it.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(it.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=D.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);D.isValidArray(r)&&this.onBatchSubscribe(r.map((n,i)=>mn(tr({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Nt.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ye.connect,async()=>{await this.onConnect()}),this.relayer.on(Ye.disconnect,()=>{this.onDisconnect()}),this.events.on(it.created,async e=>{const r=it.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(it.deleted,async e=>{const r=it.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var Nl=Object.defineProperty,Ks=Object.getOwnPropertySymbols,Ul=Object.prototype.hasOwnProperty,jl=Object.prototype.propertyIsEnumerable,Vs=(t,e,r)=>e in t?Nl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ml=(t,e)=>{for(var r in e||(e={}))Ul.call(e,r)&&Vs(t,r,e[r]);if(Ks)for(var r of Ks(e))jl.call(e,r)&&Vs(t,r,e[r]);return t};class Gs extends Je.IRelayer{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new nt.exports.EventEmitter,this.name=is,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Ye.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Ye.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(lt.payload,this.onPayloadHandler),this.provider.on(lt.connect,this.onConnectHandler),this.provider.on(lt.disconnect,this.onDisconnectHandler),this.provider.on(lt.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?k.generateChildLogger(e.logger,this.name):k.pino(k.getDefaultLoggerOptions({level:e.logger||ns})),this.messages=new ws(this.logger,e.core),this.subscriber=new Hs(this,this.logger),this.publisher=new Il(this,this.logger),this.relayUrl=e?.relayUrl||hn,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${dn}...`),await this.restartTransport(dn)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},cs)}get context(){return k.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";if(i)return i;let s;const a=c=>{c.topic===e&&(this.subscriber.off(it.created,a),s())};return await Promise.all([new Promise(c=>{s=c,this.subscriber.on(it.created,a)}),new Promise(async c=>{i=await this.subscriber.subscribe(e,r),c()})]),i}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await D.createExpiringPromise(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(it.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await D.createExpiringPromise(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(lt.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await D.isOnline())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new wl(new Tl(D.formatRelayRpcUrl({sdkVersion:as,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),js(e)){if(!e.method.endsWith(ss))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,a={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ml({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else En(e)&&this.events.emit(Ye.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ye.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=As(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(lt.payload,this.onPayloadHandler),this.provider.off(lt.connect,this.onConnectHandler),this.provider.off(lt.disconnect,this.onDisconnectHandler),this.provider.off(lt.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Ye.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await D.isOnline();D.subscribeToNetworkChange(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Ye.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},q.toMiliseconds(os)))}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var wn={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,c="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",g="[object Boolean]",O="[object Date]",p="[object Error]",T="[object Function]",I="[object GeneratorFunction]",x="[object Map]",H="[object Number]",Z="[object Null]",K="[object Object]",ae="[object Promise]",ce="[object Proxy]",W="[object RegExp]",E="[object Set]",S="[object String]",A="[object Symbol]",$="[object Undefined]",M="[object WeakMap]",V="[object ArrayBuffer]",Y="[object DataView]",de="[object Float32Array]",_="[object Float64Array]",m="[object Int8Array]",ee="[object Int16Array]",ue="[object Int32Array]",U="[object Uint8Array]",C="[object Uint8ClampedArray]",R="[object Uint16Array]",N="[object Uint32Array]",ve=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,bt=/^(?:0|[1-9]\d*)$/,G={};G[de]=G[_]=G[m]=G[ee]=G[ue]=G[U]=G[C]=G[R]=G[N]=!0,G[c]=G[l]=G[V]=G[g]=G[Y]=G[O]=G[p]=G[T]=G[x]=G[H]=G[K]=G[W]=G[E]=G[S]=G[M]=!1;var ke=typeof Qe=="object"&&Qe&&Qe.Object===Object&&Qe,v=typeof self=="object"&&self&&self.Object===Object&&self,b=ke||v||Function("return this")(),y=e&&!e.nodeType&&e,o=y&&!0&&t&&!t.nodeType&&t,h=o&&o.exports===y,j=h&&ke.process,F=function(){try{return j&&j.binding&&j.binding("util")}catch{}}(),Q=F&&F.isTypedArray;function te(f,d){for(var w=-1,L=f==null?0:f.length,oe=0,B=[];++w<L;){var _e=f[w];d(_e,w,f)&&(B[oe++]=_e)}return B}function X(f,d){for(var w=-1,L=d.length,oe=f.length;++w<L;)f[oe+w]=d[w];return f}function re(f,d){for(var w=-1,L=f==null?0:f.length;++w<L;)if(d(f[w],w,f))return!0;return!1}function $e(f,d){for(var w=-1,L=Array(f);++w<f;)L[w]=d(w);return L}function Ie(f){return function(d){return f(d)}}function He(f,d){return f.has(d)}function Ce(f,d){return f?.[d]}function Re(f){var d=-1,w=Array(f.size);return f.forEach(function(L,oe){w[++d]=[oe,L]}),w}function Ee(f,d){return function(w){return f(d(w))}}function be(f){var d=-1,w=Array(f.size);return f.forEach(function(L){w[++d]=L}),w}var ge=Array.prototype,le=Function.prototype,ne=Object.prototype,me=b["__core-js_shared__"],Pe=le.toString,se=ne.hasOwnProperty,Ve=function(){var f=/[^.]+$/.exec(me&&me.keys&&me.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),We=ne.toString,Ze=RegExp("^"+Pe.call(se).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=h?b.Buffer:void 0,Xe=b.Symbol,ut=b.Uint8Array,ht=ne.propertyIsEnumerable,vt=ge.splice,tt=Xe?Xe.toStringTag:void 0,Rt=Object.getOwnPropertySymbols,rr=et?et.isBuffer:void 0,Sr=Ee(Object.keys,Object),we=Ft(b,"DataView"),ye=Ft(b,"Map"),De=Ft(b,"Promise"),Se=Ft(b,"Set"),Oe=Ft(b,"WeakMap"),pe=Ft(Object,"create"),Ae=Ct(we),Le=Ct(ye),Ne=Ct(De),Ue=Ct(Se),je=Ct(Oe),xe=Xe?Xe.prototype:void 0,Te=xe?xe.valueOf:void 0;function fe(f){var d=-1,w=f==null?0:f.length;for(this.clear();++d<w;){var L=f[d];this.set(L[0],L[1])}}function Me(){this.__data__=pe?pe(null):{},this.size=0}function Fe(f){var d=this.has(f)&&delete this.__data__[f];return this.size-=d?1:0,d}function ql(f){var d=this.__data__;if(pe){var w=d[f];return w===n?void 0:w}return se.call(d,f)?d[f]:void 0}function Yl(f){var d=this.__data__;return pe?d[f]!==void 0:se.call(d,f)}function kl(f,d){var w=this.__data__;return this.size+=this.has(f)?0:1,w[f]=pe&&d===void 0?n:d,this}fe.prototype.clear=Me,fe.prototype.delete=Fe,fe.prototype.get=ql,fe.prototype.has=Yl,fe.prototype.set=kl;function pt(f){var d=-1,w=f==null?0:f.length;for(this.clear();++d<w;){var L=f[d];this.set(L[0],L[1])}}function Wl(){this.__data__=[],this.size=0}function Xl(f){var d=this.__data__,w=Tr(d,f);if(w<0)return!1;var L=d.length-1;return w==L?d.pop():vt.call(d,w,1),--this.size,!0}function Jl(f){var d=this.__data__,w=Tr(d,f);return w<0?void 0:d[w][1]}function Ql(f){return Tr(this.__data__,f)>-1}function Zl(f,d){var w=this.__data__,L=Tr(w,f);return L<0?(++this.size,w.push([f,d])):w[L][1]=d,this}pt.prototype.clear=Wl,pt.prototype.delete=Xl,pt.prototype.get=Jl,pt.prototype.has=Ql,pt.prototype.set=Zl;function xt(f){var d=-1,w=f==null?0:f.length;for(this.clear();++d<w;){var L=f[d];this.set(L[0],L[1])}}function eh(){this.size=0,this.__data__={hash:new fe,map:new(ye||pt),string:new fe}}function th(f){var d=Ir(this,f).delete(f);return this.size-=d?1:0,d}function rh(f){return Ir(this,f).get(f)}function nh(f){return Ir(this,f).has(f)}function ih(f,d){var w=Ir(this,f),L=w.size;return w.set(f,d),this.size+=w.size==L?0:1,this}xt.prototype.clear=eh,xt.prototype.delete=th,xt.prototype.get=rh,xt.prototype.has=nh,xt.prototype.set=ih;function Or(f){var d=-1,w=f==null?0:f.length;for(this.__data__=new xt;++d<w;)this.add(f[d])}function sh(f){return this.__data__.set(f,n),this}function oh(f){return this.__data__.has(f)}Or.prototype.add=Or.prototype.push=sh,Or.prototype.has=oh;function Et(f){var d=this.__data__=new pt(f);this.size=d.size}function ah(){this.__data__=new pt,this.size=0}function ch(f){var d=this.__data__,w=d.delete(f);return this.size=d.size,w}function uh(f){return this.__data__.get(f)}function fh(f){return this.__data__.has(f)}function lh(f,d){var w=this.__data__;if(w instanceof pt){var L=w.__data__;if(!ye||L.length<r-1)return L.push([f,d]),this.size=++w.size,this;w=this.__data__=new xt(L)}return w.set(f,d),this.size=w.size,this}Et.prototype.clear=ah,Et.prototype.delete=ch,Et.prototype.get=uh,Et.prototype.has=fh,Et.prototype.set=lh;function hh(f,d){var w=Rr(f),L=!w&&Ih(f),oe=!w&&!L&&Dn(f),B=!w&&!L&&!oe&&lo(f),_e=w||L||oe||B,Be=_e?$e(f.length,String):[],Ke=Be.length;for(var he in f)(d||se.call(f,he))&&!(_e&&(he=="length"||oe&&(he=="offset"||he=="parent")||B&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||wh(he,Ke)))&&Be.push(he);return Be}function Tr(f,d){for(var w=f.length;w--;)if(ao(f[w][0],d))return w;return-1}function dh(f,d,w){var L=d(f);return Rr(f)?L:X(L,w(f))}function nr(f){return f==null?f===void 0?$:Z:tt&&tt in Object(f)?Eh(f):Th(f)}function no(f){return ir(f)&&nr(f)==c}function io(f,d,w,L,oe){return f===d?!0:f==null||d==null||!ir(f)&&!ir(d)?f!==f&&d!==d:gh(f,d,w,L,io,oe)}function gh(f,d,w,L,oe,B){var _e=Rr(f),Be=Rr(d),Ke=_e?l:mt(f),he=Be?l:mt(d);Ke=Ke==c?K:Ke,he=he==c?K:he;var rt=Ke==K,ft=he==K,Ge=Ke==he;if(Ge&&Dn(f)){if(!Dn(d))return!1;_e=!0,rt=!1}if(Ge&&!rt)return B||(B=new Et),_e||lo(f)?so(f,d,w,L,oe,B):bh(f,d,Ke,w,L,oe,B);if(!(w&i)){var ot=rt&&se.call(f,"__wrapped__"),at=ft&&se.call(d,"__wrapped__");if(ot||at){var wt=ot?f.value():f,_t=at?d.value():d;return B||(B=new Et),oe(wt,_t,w,L,B)}}return Ge?(B||(B=new Et),vh(f,d,w,L,oe,B)):!1}function yh(f){if(!fo(f)||Sh(f))return!1;var d=co(f)?Ze:ie;return d.test(Ct(f))}function ph(f){return ir(f)&&uo(f.length)&&!!G[nr(f)]}function _h(f){if(!Oh(f))return Sr(f);var d=[];for(var w in Object(f))se.call(f,w)&&w!="constructor"&&d.push(w);return d}function so(f,d,w,L,oe,B){var _e=w&i,Be=f.length,Ke=d.length;if(Be!=Ke&&!(_e&&Ke>Be))return!1;var he=B.get(f);if(he&&B.get(d))return he==d;var rt=-1,ft=!0,Ge=w&s?new Or:void 0;for(B.set(f,d),B.set(d,f);++rt<Be;){var ot=f[rt],at=d[rt];if(L)var wt=_e?L(at,ot,rt,d,f,B):L(ot,at,rt,f,d,B);if(wt!==void 0){if(wt)continue;ft=!1;break}if(Ge){if(!re(d,function(_t,Pt){if(!He(Ge,Pt)&&(ot===_t||oe(ot,_t,w,L,B)))return Ge.push(Pt)})){ft=!1;break}}else if(!(ot===at||oe(ot,at,w,L,B))){ft=!1;break}}return B.delete(f),B.delete(d),ft}function bh(f,d,w,L,oe,B,_e){switch(w){case Y:if(f.byteLength!=d.byteLength||f.byteOffset!=d.byteOffset)return!1;f=f.buffer,d=d.buffer;case V:return!(f.byteLength!=d.byteLength||!B(new ut(f),new ut(d)));case g:case O:case H:return ao(+f,+d);case p:return f.name==d.name&&f.message==d.message;case W:case S:return f==d+"";case x:var Be=Re;case E:var Ke=L&i;if(Be||(Be=be),f.size!=d.size&&!Ke)return!1;var he=_e.get(f);if(he)return he==d;L|=s,_e.set(f,d);var rt=so(Be(f),Be(d),L,oe,B,_e);return _e.delete(f),rt;case A:if(Te)return Te.call(f)==Te.call(d)}return!1}function vh(f,d,w,L,oe,B){var _e=w&i,Be=oo(f),Ke=Be.length,he=oo(d),rt=he.length;if(Ke!=rt&&!_e)return!1;for(var ft=Ke;ft--;){var Ge=Be[ft];if(!(_e?Ge in d:se.call(d,Ge)))return!1}var ot=B.get(f);if(ot&&B.get(d))return ot==d;var at=!0;B.set(f,d),B.set(d,f);for(var wt=_e;++ft<Ke;){Ge=Be[ft];var _t=f[Ge],Pt=d[Ge];if(L)var ho=_e?L(Pt,_t,Ge,d,f,B):L(_t,Pt,Ge,f,d,B);if(!(ho===void 0?_t===Pt||oe(_t,Pt,w,L,B):ho)){at=!1;break}wt||(wt=Ge=="constructor")}if(at&&!wt){var xr=f.constructor,Cr=d.constructor;xr!=Cr&&"constructor"in f&&"constructor"in d&&!(typeof xr=="function"&&xr instanceof xr&&typeof Cr=="function"&&Cr instanceof Cr)&&(at=!1)}return B.delete(f),B.delete(d),at}function oo(f){return dh(f,Ch,mh)}function Ir(f,d){var w=f.__data__;return Dh(d)?w[typeof d=="string"?"string":"hash"]:w.map}function Ft(f,d){var w=Ce(f,d);return yh(w)?w:void 0}function Eh(f){var d=se.call(f,tt),w=f[tt];try{f[tt]=void 0;var L=!0}catch{}var oe=We.call(f);return L&&(d?f[tt]=w:delete f[tt]),oe}var mh=Rt?function(f){return f==null?[]:(f=Object(f),te(Rt(f),function(d){return ht.call(f,d)}))}:Ph,mt=nr;(we&&mt(new we(new ArrayBuffer(1)))!=Y||ye&&mt(new ye)!=x||De&&mt(De.resolve())!=ae||Se&&mt(new Se)!=E||Oe&&mt(new Oe)!=M)&&(mt=function(f){var d=nr(f),w=d==K?f.constructor:void 0,L=w?Ct(w):"";if(L)switch(L){case Ae:return Y;case Le:return x;case Ne:return ae;case Ue:return E;case je:return M}return d});function wh(f,d){return d=d??a,!!d&&(typeof f=="number"||bt.test(f))&&f>-1&&f%1==0&&f<d}function Dh(f){var d=typeof f;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?f!=="__proto__":f===null}function Sh(f){return!!Ve&&Ve in f}function Oh(f){var d=f&&f.constructor,w=typeof d=="function"&&d.prototype||ne;return f===w}function Th(f){return We.call(f)}function Ct(f){if(f!=null){try{return Pe.call(f)}catch{}try{return f+""}catch{}}return""}function ao(f,d){return f===d||f!==f&&d!==d}var Ih=no(function(){return arguments}())?no:function(f){return ir(f)&&se.call(f,"callee")&&!ht.call(f,"callee")},Rr=Array.isArray;function Rh(f){return f!=null&&uo(f.length)&&!co(f)}var Dn=rr||Ah;function xh(f,d){return io(f,d)}function co(f){if(!fo(f))return!1;var d=nr(f);return d==T||d==I||d==u||d==ce}function uo(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=a}function fo(f){var d=typeof f;return f!=null&&(d=="object"||d=="function")}function ir(f){return f!=null&&typeof f=="object"}var lo=Q?Ie(Q):ph;function Ch(f){return Rh(f)?hh(f):_h(f)}function Ph(){return[]}function Ah(){return!1}t.exports=xh})(wn,wn.exports);var Fl=wn.exports,Bl=Object.defineProperty,qs=Object.getOwnPropertySymbols,zl=Object.prototype.hasOwnProperty,$l=Object.prototype.propertyIsEnumerable,Ys=(t,e,r)=>e in t?Bl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ks=(t,e)=>{for(var r in e||(e={}))zl.call(e,r)&&Ys(t,r,e[r]);if(qs)for(var r of qs(e))$l.call(e,r)&&Ys(t,r,e[r]);return t};class Ws extends Je.IStore{constructor(e,r,n,i=dt,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=us,this.cached=[],this.initialized=!1,this.storagePrefix=dt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!D.isUndefined(a)?this.map.set(this.getKey(a),a):D.isProposalStruct(a)?this.map.set(a.id,a):D.isSessionStruct(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)},this.set=async(a,c)=>{this.isInitialized(),this.map.has(a)?await this.update(a,c):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:c}),this.map.set(a,c),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(c=>Object.keys(a).every(l=>Fl(c[l],a[l]))):this.values),this.update=async(a,c)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:c});const l=ks(ks({},this.getData(a)),c);this.map.set(a,l),await this.persist()},this.delete=async(a,c)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:c}),this.map.delete(a),await this.persist())},this.logger=k.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return k.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=D.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=D.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Xs{constructor(e,r){this.core=e,this.logger=r,this.name=gs,this.version=ys,this.events=new nt.exports,this.initialized=!1,this.storagePrefix=dt,this.ignoredPayloadTypes=[D.TYPE_1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=D.generateRandomBytes32(),i=await this.core.crypto.setSymKey(n),s=D.calcExpiry(q.ONE_DAY),a={protocol:rs},c={topic:i,expiry:s,relay:a,active:!1},l=D.formatUri({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:a});return await this.pairings.set(i,c),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:l}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:a}=D.parseUri(n.uri);let c;if(this.pairings.keys.includes(i)&&(c=this.pairings.get(i),c.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:a}));const l=D.calcExpiry(q.ONE_DAY),u={topic:i,relay:a,expiry:l,active:!1};return await this.pairings.set(i,u),this.core.expirer.set(i,l),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Qt.create,u),u},this.activate=async({topic:n})=>{this.isInitialized();const i=D.calcExpiry(q.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:a,resolve:c,reject:l}=D.createDelayedPromise();this.events.once(D.engineEvent("pairing_ping",s),({error:u})=>{u?l(u):c()}),await a()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",D.getSdkError("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const a=vn(i,s),c=await this.core.crypto.encode(n,a),l=Mt[i].req;return this.core.history.set(n,a),this.core.relayer.publish(n,c,l),a.id},this.sendResult=async(n,i,s)=>{const a=As(n,s),c=await this.core.crypto.encode(i,a),l=await this.core.history.get(i,n),u=Mt[l.request.method].res;await this.core.relayer.publish(i,c,u),await this.core.history.resolve(a)},this.sendError=async(n,i,s)=>{const a=Ls(n,s),c=await this.core.crypto.encode(i,a),l=await this.core.history.get(i,n),u=Mt[l.request.method]?Mt[l.request.method].res:Mt.unregistered_method.res;await this.core.relayer.publish(i,c,u),await this.core.history.resolve(a)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,D.getSdkError("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>D.isExpired(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,a=(await this.core.history.get(i,s.id)).request.method;switch(a){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Qt.ping,{id:s,topic:n})}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Ms(i)?this.events.emit(D.engineEvent("pairing_ping",s),{}):wr(i)&&this.events.emit(D.engineEvent("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Qt.delete,{id:s,topic:n})}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:a}=i;try{if(this.registeredMethods.includes(a))return;const c=D.getSdkError("WC_METHOD_UNSUPPORTED",a);await this.sendError(s,n,c),this.logger.error(c)}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(D.getSdkError("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!D.isValidParams(n)){const{message:i}=D.getInternalError("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!D.isValidUrl(n.uri)){const{message:i}=D.getInternalError("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!D.isValidParams(n)){const{message:s}=D.getInternalError("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!D.isValidParams(n)){const{message:s}=D.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!D.isValidString(n,!1)){const{message:i}=D.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=D.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(D.isExpired(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=D.getInternalError("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=k.generateChildLogger(r,this.name),this.pairings=new Ws(this.core,this.logger,this.name,this.storagePrefix)}get context(){return k.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ye.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{js(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):En(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(st.expired,async e=>{const{topic:r}=D.parseExpirerTarget(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Qt.expire,{topic:r}))})}}class Js extends Je.IJsonRpcHistory{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new nt.exports.EventEmitter,this.name=ps,this.version=_s,this.cached=[],this.initialized=!1,this.storagePrefix=dt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const a={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:D.calcExpiry(q.THIRTY_DAYS)};this.records.set(a.id,a),this.events.emit(ct.created,a)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=wr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(ct.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(ct.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=k.generateChildLogger(r,this.name)}get context(){return k.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:vn(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=D.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ct.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=D.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ct.created,e=>{const r=ct.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ct.updated,e=>{const r=ct.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ct.deleted,e=>{const r=ct.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Nt.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{q.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Qs extends Je.IExpirer{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new nt.exports.EventEmitter,this.name=bs,this.version=vs,this.cached=[],this.initialized=!1,this.storagePrefix=dt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),a={target:s,expiry:i};this.expirations.set(s,a),this.checkExpiry(s,a),this.events.emit(st.created,{target:s,expiration:a})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(st.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=k.generateChildLogger(r,this.name)}get context(){return k.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return D.formatTopicTarget(e);if(typeof e=="number")return D.formatIdTarget(e);const{message:r}=D.getInternalError("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(st.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=D.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=D.getInternalError("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;q.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(st.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Nt.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(st.created,e=>{const r=st.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(st.expired,e=>{const r=st.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(st.deleted,e=>{const r=st.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=D.getInternalError("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Zs extends Je.IVerify{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Er,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async()=>{if(this.verifyDisabled||D.isReactNative()||!D.isBrowser())return;const n=mr;this.verifyUrl!==n&&this.removeIframe(),this.verifyUrl=n;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i)}if(!this.initialized){this.removeIframe(),this.verifyUrl=gn;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=n?.verifyUrl||mr;let s;try{s=await this.fetchAttestation(n.attestationId,i)}catch(a){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.info(a),s=await this.fetchAttestation(n.attestationId,gn)}return s},this.fetchAttestation=async(n,i)=>{this.logger.info(`resolving attestation: ${n} from url: ${i}`);const s=this.startAbortTimer(q.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(s),a.status===200?await a.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(Er))return s();window.addEventListener("message",i);const a=document.createElement("iframe");a.id=Er,a.src=`${this.verifyUrl}/${this.projectId}`,a.style.display="none",document.body.append(a),this.iframe=a,n=s}),new Promise((s,a)=>setTimeout(()=>{window.removeEventListener("message",i),a("verify iframe load timeout")},q.toMiliseconds(q.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=k.generateChildLogger(r,this.name),this.verifyUrl=mr,this.abortController=new AbortController,this.isDevEnv=D.isNode()&&process.env.IS_VITEST}get context(){return k.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),q.toMiliseconds(e))}}var Hl=Object.defineProperty,eo=Object.getOwnPropertySymbols,Kl=Object.prototype.hasOwnProperty,Vl=Object.prototype.propertyIsEnumerable,to=(t,e,r)=>e in t?Hl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ro=(t,e)=>{for(var r in e||(e={}))Kl.call(e,r)&&to(t,r,e[r]);if(eo)for(var r of eo(e))Vl.call(e,r)&&to(t,r,e[r]);return t};class Dr extends Je.ICore{constructor(e){super(e),this.protocol=fn,this.version=Gi,this.name=vr,this.events=new nt.exports.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||hn,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:k.pino(k.getDefaultLoggerOptions({level:e?.logger||qi.logger}));this.logger=k.generateChildLogger(r,this.name),this.heartbeat=new Nt.HeartBeat,this.crypto=new ms(this,this.logger,e?.keychain),this.history=new Js(this,this.logger),this.expirer=new Qs(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new ko(ro(ro({},Yi),e?.storageOptions)),this.relayer=new Gs({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Xs(this,this.logger),this.verify=new Zs(this.projectId||"",this.logger)}static async init(e){const r=new Dr(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(fs,n),r}get context(){return k.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Gl=Dr;P.CORE_CONTEXT=vr,P.CORE_DEFAULT=qi,P.CORE_PROTOCOL=fn,P.CORE_STORAGE_OPTIONS=Yi,P.CORE_STORAGE_PREFIX=dt,P.CORE_VERSION=Gi,P.CRYPTO_CLIENT_SEED=ln,P.CRYPTO_CONTEXT=ki,P.CRYPTO_JWT_TTL=Wi,P.Core=Gl,P.Crypto=ms,P.EXPIRER_CONTEXT=bs,P.EXPIRER_DEFAULT_TTL=jf,P.EXPIRER_EVENTS=st,P.EXPIRER_STORAGE_VERSION=vs,P.Expirer=Qs,P.HISTORY_CONTEXT=ps,P.HISTORY_EVENTS=ct,P.HISTORY_STORAGE_VERSION=_s,P.JsonRpcHistory=Js,P.KEYCHAIN_CONTEXT=Xi,P.KEYCHAIN_STORAGE_VERSION=Ji,P.KeyChain=Es,P.MESSAGES_CONTEXT=Qi,P.MESSAGES_STORAGE_VERSION=Zi,P.MessageTracker=ws,P.PAIRING_CONTEXT=gs,P.PAIRING_DEFAULT_TTL=Uf,P.PAIRING_EVENTS=Qt,P.PAIRING_RPC_OPTS=Mt,P.PAIRING_STORAGE_VERSION=ys,P.PENDING_SUB_RESOLUTION_TIMEOUT=ds,P.PUBLISHER_CONTEXT=ts,P.PUBLISHER_DEFAULT_TTL=es,P.Pairing=Xs,P.RELAYER_CONTEXT=is,P.RELAYER_DEFAULT_LOGGER=ns,P.RELAYER_DEFAULT_PROTOCOL=rs,P.RELAYER_DEFAULT_RELAY_URL=hn,P.RELAYER_EVENTS=Ye,P.RELAYER_FAILOVER_RELAY_URL=dn,P.RELAYER_PROVIDER_EVENTS=lt,P.RELAYER_RECONNECT_TIMEOUT=os,P.RELAYER_SDK_VERSION=as,P.RELAYER_STORAGE_OPTIONS=Lf,P.RELAYER_SUBSCRIBER_SUFFIX=ss,P.RELAYER_TRANSPORT_CUTOFF=cs,P.Relayer=Gs,P.STORE_STORAGE_VERSION=us,P.SUBSCRIBER_CONTEXT=ls,P.SUBSCRIBER_DEFAULT_TTL=Nf,P.SUBSCRIBER_EVENTS=it,P.SUBSCRIBER_STORAGE_VERSION=hs,P.Store=Ws,P.Subscriber=Hs,P.VERIFY_CONTEXT=Er,P.VERIFY_FALLBACK_SERVER=gn,P.VERIFY_SERVER=mr,P.Verify=Zs,P.WALLETCONNECT_CLIENT_ID=fs,P.default=Dr,Object.defineProperty(P,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
